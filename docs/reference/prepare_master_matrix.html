<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="prepare an S3 object that will serve as the base to perform all
further analyses. This object will contain geographic and environmental
information that will be used to characterize the region of interest."><title>Prepare a base object to perform further analyses — prepare_master_matrix • biosurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare a base object to perform further analyses — prepare_master_matrix"><meta property="og:description" content="prepare an S3 object that will serve as the base to perform all
further analyses. This object will contain geographic and environmental
information that will be used to characterize the region of interest."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">biosurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/biosurvey_preparing_data.html">biosurvey: Preparing data</a>
    <a class="dropdown-item" href="../articles/biosurvey_selecting_sites.html">biosurvey: Selecting sampling sites</a>
    <a class="dropdown-item" href="../articles/biosurvey_selection_with_preselected_sites.html">biosurvey: Selecting sampling sites using preselected points</a>
    <a class="dropdown-item" href="../articles/biosurvey_testing_module.html">biosurvey: Testing efficiency of selected sites</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/claununez/biosurvey/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Prepare a base object to perform further analyses</h1>
      <small class="dont-index">Source: <a href="https://github.com/claununez/biosurvey/blob/HEAD/R/master_matrix.R" class="external-link"><code>R/master_matrix.R</code></a></small>
      <div class="d-none name"><code>prepare_master_matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>prepare an S3 object that will serve as the base to perform all
further analyses. This object will contain geographic and environmental
information that will be used to characterize the region of interest.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_master_matrix</span><span class="op">(</span><span class="va">region</span>, <span class="va">variables</span>, mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                      preselected_sites <span class="op">=</span> <span class="cn">NULL</span>, do_pca <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      center <span class="op">=</span> <span class="cn">TRUE</span>, scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      variables_in_matrix <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>region</dt>
<dd><p>SpatVector of the region of interest; for instance,
a country, another type of administrative are, or a protected area.</p></dd>


<dt>variables</dt>
<dd><p>SpatRaster of environmental variables.</p></dd>


<dt>mask</dt>
<dd><p>(optional) SpatVector object to mask <code>variables</code> and
reduce <code>region</code> to an area that is more relevant for analysis (e.g.,
only areas with natural vegetation cover). Default = NULL.</p></dd>


<dt>preselected_sites</dt>
<dd><p>data.frame containing sites that must be included
in posterior selections of sites for the survey system. Columns must be:
"Sites", "Longitude", "Latitude", in that order.</p></dd>


<dt>do_pca</dt>
<dd><p>(logical) whether or not to perform a principal component
analysis. Default = FALSE.</p></dd>


<dt>center</dt>
<dd><p>(logical) whether or not to center variables. Argument to be
passed to the function <code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a></code>. Default = TRUE.</p></dd>


<dt>scale</dt>
<dd><p>(logical) whether or not to scale the variables. Recommended
when variables are in different units. Argument to be passed to the function
<code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a></code>. Default = FALSE.</p></dd>


<dt>variables_in_matrix</dt>
<dd><p>(character) name of variables to include in
matrix. If NULL (the default) all variables will be included.</p></dd>


<dt>verbose</dt>
<dd><p>(logical) whether or not to print messages about the process.
Default = TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An S3 object of class <code><a href="master_matrix.html">master_matrix</a></code> containing the following
elements:</p><ul><li><p>data_matrix: a date.frame with information about geographic location of
raster cells, initial environmental data, and if <code>do_pca</code> is TRUE,
the first two principal components derived from original data.</p></li>
<li><p>region: a SpatVector representing the region of interest.</p></li>
<li><p>mask: SpatVector object used. NULL if <code>mask</code> was not defined.</p></li>
<li><p>preselected_sites: sites defined by used. NULL if <code>preselected_sites</code>
was not defined.</p></li>
<li><p>raster_base: a SpatRaster representing the raster masked to region or
mask, which will be used for plotting purposes.</p></li>
<li><p>PCA_results: if <code>do_pca</code> is TRUE, other results from principal
component analysis. If FALSE, PCA_results element of the object is NULL.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function helps in preparing all data as needed for further analyses
aiming to define a survey sampling system considering geographic and
environmental spaces in the <code>region</code> of interest.</p>
<p>If <code>mask</code> is defined all analyses will be restricted to such an area.
If <code>mask</code> is not fully contained by <code>region</code>, the mask used for
reducing <code>variables</code>, and returned as part of the S3 object
(master_matrix) is the intersection between them.</p>
<p>If <code>preselected_sites</code> is defined, environmental values and, if
<code>do_pca</code> = TRUE, principal components are added to such records. These
records and their characteristics will be considered in further analyses.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Data</span></span></span>
<span class="r-in"><span><span class="va">mx</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/mx.gpkg"</span>, package <span class="op">=</span> <span class="st">"biosurvey"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/variables.tif"</span>,</span></span>
<span class="r-in"><span>                                       package <span class="op">=</span> <span class="st">"biosurvey"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create master matrix object</span></span></span>
<span class="r-in"><span><span class="va">m_matrix</span> <span class="op">&lt;-</span> <span class="fu">prepare_master_matrix</span><span class="op">(</span>region <span class="op">=</span> <span class="va">mx</span>, variables <span class="op">=</span> <span class="va">variables</span>,</span></span>
<span class="r-in"><span>                                  do_pca <span class="op">=</span> <span class="cn">TRUE</span>, center <span class="op">=</span> <span class="cn">TRUE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Processing raster layers, please wait...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Performing PCA analysis</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Claudia Nuñez-Penichet, Marlon E. Cobos, Jorge Soberón, Tomer Gueta, Narayani Barve, Vijay Barve, Adolfo G. Navarro-Sigüenza, A. Townsend Peterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

