<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Prepares a presence-absence matrix (PAM) in which all sites
of interest (rows) will have a value for presence or absence of a species
of interest (columns). Initial points of interest will be represented by an
ID, and longitude and latitude coordinates. The PAM will be linked to a
spatial grid."><title>Presence-absence matrix (PAM) linked to a spatial grid — prepare_base_PAM • biosurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Presence-absence matrix (PAM) linked to a spatial grid — prepare_base_PAM"><meta property="og:description" content="Prepares a presence-absence matrix (PAM) in which all sites
of interest (rows) will have a value for presence or absence of a species
of interest (columns). Initial points of interest will be represented by an
ID, and longitude and latitude coordinates. The PAM will be linked to a
spatial grid."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">biosurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/biosurvey_preparing_data.html">biosurvey: Preparing data</a>
    <a class="dropdown-item" href="../articles/biosurvey_selecting_sites.html">biosurvey: Selecting sampling sites</a>
    <a class="dropdown-item" href="../articles/biosurvey_selection_with_preselected_sites.html">biosurvey: Selecting sampling sites using preselected points</a>
    <a class="dropdown-item" href="../articles/biosurvey_testing_module.html">biosurvey: Testing efficiency of selected sites</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/claununez/biosurvey/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Presence-absence matrix (PAM) linked to a spatial grid</h1>
      <small class="dont-index">Source: <a href="https://github.com/claununez/biosurvey/blob/HEAD/R/base_pam.R" class="external-link"><code>R/base_pam.R</code></a></small>
      <div class="d-none name"><code>prepare_base_PAM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prepares a presence-absence matrix (PAM) in which all sites
of interest (rows) will have a value for presence or absence of a species
of interest (columns). Initial points of interest will be represented by an
ID, and longitude and latitude coordinates. The PAM will be linked to a
spatial grid.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_base_PAM</span><span class="op">(</span><span class="va">data</span>, format <span class="op">=</span> <span class="cn">NULL</span>, master_matrix <span class="op">=</span> <span class="cn">NULL</span>, region <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                 <span class="va">cell_size</span>, complete_cover <span class="op">=</span> <span class="cn">TRUE</span>, clip_grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                 indices <span class="op">=</span> <span class="st">"basic"</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, n_cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                 verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>species geographic ranges to be used to create a presence-absence
matrix (PAM). This argument can be: character, data.frame, SpatRaster,
list, or SpatVector. See details for a description of the characteristics of
data for each option.</p></dd>


<dt>format</dt>
<dd><p>(character) if <code>data</code> is of class character, available
options are: "shp", "gpkg", "GTiff", and "ascii".</p></dd>


<dt>master_matrix</dt>
<dd><p>object of class "master_matrix" or "master_selection".
See details. Default = NULL. Either this argument or <code>region</code> must be
defined.</p></dd>


<dt>region</dt>
<dd><p>SpatVector of the region of interest; for instance,
a country, another type of administrative are, or a protected area.
Default = NULL. Either this argument or <code>master_matrix</code> must be
defined. Ignored if <code>master_matrix</code> is defined.</p></dd>


<dt>cell_size</dt>
<dd><p>(numeric) resolution for grid (single number or vector of
two numbers) in kilometers (km).</p></dd>


<dt>complete_cover</dt>
<dd><p>(logical) whether or not to include cells of grid
partially overlapped with the geographic region of interest contained in
<code>master_matrix</code>. Default = TRUE.</p></dd>


<dt>clip_grid</dt>
<dd><p>(logical) whether to clip the spatial grid using the region
of interest. Clipping improves visualization but depending on how complex
the region of interest is it could take time to perform this task.</p></dd>


<dt>indices</dt>
<dd><p>(character) code for indices to be calculated. Basic indices
are calculated all the time, other indices need to be specified. Options are:
"all", "basic, "AB", "BW", "BL", "SCSC", "SCSR", "DF", "DivF", "CC", "WRN",
"SRC", "CMSC", and "CMSR". Default = "basic". See details.</p></dd>


<dt>parallel</dt>
<dd><p>(logical) whether to perform analyses in parallel.
Default = FALSE. Not used if data is of class data.frame, or
SpatRaster.</p></dd>


<dt>n_cores</dt>
<dd><p>(numeric) number of cores to be used when <code>parallel</code> =
TRUE. The default, NULL, uses available cores - 1.</p></dd>


<dt>verbose</dt>
<dd><p>(logical) whether or not to print messages about the process.
Default = TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A presence-absence matrix (PAM) of class <code><a href="base_PAM.html">base_PAM</a></code> for the
region of interest associated with a SpatVector, as in a grid
of <code>cell_size</code> resolution. Each grid cell is related to a specific ID
and longitude and latitude coordinates. Presence (1) and absence (0) values
for each species in every cell of the PAM are included as apart of the
data.frame of the SpatVector. PAM indices is returned with the
basic indices of biodiversity as default, but can be changed using the
argument <code>indices</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Objects of class "master_matrix" or "master_selection" can be obtained from
functions <code><a href="prepare_master_matrix.html">prepare_master_matrix</a></code>,
<code><a href="random_selection.html">random_selection</a></code>, <code><a href="uniformG_selection.html">uniformG_selection</a></code>,
<code><a href="uniformE_selection.html">uniformE_selection</a></code>, or <code>uniformEG_selection</code>. The element
region or mask if this last is not NULL is used to prepare the spatial grid.</p>
<p>Geographic projection of objects or coordinates involved must be WGS84
(EPSG:4326).</p>
<p>Description of objects to be used as <code>data</code>:</p><ul><li><p>character.- name of directory containing raster, shapefiles or geopackage
files representing species geographic ranges. Each file must be named
as the species that it represents. All files must be in the same format. If
files are in raster format, "GTiff" and "ascii" are acceptable extensions;
values in each layer must be 1 (presence) and 0 (absence).</p></li>
<li><p>data.frame.- a table containing  three columns. Columns must be in the
following order: Longitude, Latitude, Species.</p></li>
<li><p>SpatRaster.- Each layer must be named as the species which
range it represents, and values in each layer must be 1 (presence) and 0
(absence).</p></li>
<li><p>list.-  a list of SpatRaster objects that cannot be stacked because of
extent or resolution differences. Each element of the list must be named as
the species which range it represents, and values in each SpatRaster must be
1 (presence, suitable) and 0 (absence, unsuitable).</p></li>
<li><p>SpatVector.- object representing species' geographic ranges.
The data.frame associated with the object must contain a column named
"Species" to distinguish among features representing each species range.</p></li>
<li><p>SpatVector.- object of spatial points where each record of a
species must be a point. The associated data.frame must contain the
following columns (in that order): Longitude, Latitude, Species.</p></li>
</ul><p>A list of codes and indices that can be calculated is described below. For
further details on the way calculations are performed and the meaning of the
indices see Soberon and Cavner (2015)
<a href="https://doi.org/10.17161/bi.v10i0.4801" class="external-link">doi:10.17161/bi.v10i0.4801</a>
.</p><table class="table table"><tr><td>Code</td><td>Index</td><td>Calculation</td></tr><tr><td>RI</td><td>Richness</td><td>Basic</td></tr><tr><td>RA</td><td>Range</td><td>Basic</td></tr><tr><td>RIN</td><td>Richness normalized</td><td>Basic</td></tr><tr><td>RAN</td><td>Range normalized</td><td>Basic</td></tr><tr><td>AB</td><td>Additive Beta</td><td>Needs to be defined</td></tr><tr><td>BW</td><td>Beta Whittaker</td><td>Needs to be defined</td></tr><tr><td>BL</td><td>Beta Legendre</td><td>Needs to be defined and DF</td></tr><tr><td>SCSC</td><td>Schluter covariance sites-composition</td><td>Needs to be defined and CMSC</td></tr><tr><td>SCSR</td><td>Schluter covariance species-ranges</td><td>Needs to be defined and CMSR</td></tr><tr><td>DF</td><td>Dispersion field</td><td>Needs to be defined</td></tr><tr><td>DivF</td><td>Diversity field</td><td>Needs to be defined</td></tr><tr><td>SCC</td><td>Shared community composition</td><td>Needs to be defined</td></tr><tr><td>WRN</td><td>Wright-Reeves nestedness</td><td>Needs to be defined, BW, and DF</td></tr><tr><td>SRC</td><td>Stone-Roberts C-score</td><td>Needs to be defined and DF</td></tr><tr><td>CMSC</td><td>Covariance matrix sites-composition</td><td>Needs to be defined, DF, and BW</td></tr><tr><td>CMSR</td><td>Covariance matrix species-ranges</td><td>Needs to be defined, SCC, and BW</td></tr><tr><td>MCC</td><td>Mean composition covariance</td><td>Calculated with CMSC</td></tr><tr><td>MRC</td><td>Mean range covariance</td><td>Calculated with CMSR</td></tr></table></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="PAM_indices.html">PAM_indices</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Data</span></span></span>
<span class="r-in"><span><span class="va">m_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="save_master.html">read_master</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/m_matrix.rds"</span>,</span></span>
<span class="r-in"><span>                                    package <span class="op">=</span> <span class="st">"biosurvey"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">species_data</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/species_data.gpkg"</span>,</span></span>
<span class="r-in"><span>                                        package <span class="op">=</span> <span class="st">"biosurvey"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create base_PAM</span></span></span>
<span class="r-in"><span><span class="va">b_pam</span> <span class="op">&lt;-</span> <span class="fu">prepare_base_PAM</span><span class="op">(</span>data <span class="op">=</span> <span class="va">species_data</span>, master_matrix <span class="op">=</span> <span class="va">m_matrix</span>,</span></span>
<span class="r-in"><span>                          cell_size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing spatial grid</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preprocessing 'data'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   4%  |                                                                              |======                                                                |   8%  |                                                                              |=========                                                             |  12%  |                                                                              |============                                                          |  17%  |                                                                              |===============                                                       |  21%  |                                                                              |==================                                                    |  25%  |                                                                              |====================                                                  |  29%  |                                                                              |=======================                                               |  33%  |                                                                              |==========================                                            |  38%  |                                                                              |=============================                                         |  42%  |                                                                              |================================                                      |  46%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================                                |  54%  |                                                                              |=========================================                             |  58%  |                                                                              |============================================                          |  62%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |====================================================                  |  75%  |                                                                              |=======================================================               |  79%  |                                                                              |==========================================================            |  83%  |                                                                              |=============================================================         |  88%  |                                                                              |================================================================      |  92%  |                                                                              |===================================================================   |  96%  |                                                                              |======================================================================| 100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing PAM from information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating PAM indices</span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">b_pam</span><span class="op">$</span><span class="va">PAM</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="prepare_base_PAM-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="summary.html">summary</a></span><span class="op">(</span><span class="va">b_pam</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       Summary of a base_PAM object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Presence-absence matrix:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of cells:    266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of species:  25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial object representing the PAM:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  class       : SpatVector </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  geometry    : polygons </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  dimensions  : 266, 28  (geometries, attributes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  extent      : -117.9082, -86.02088, 14.59585, 32.95524  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  coord. ref. : lon/lat WGS 84 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  names       :    ID Longitude Latitude Species_1 Species_2 Species_3 Species_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  type        : &lt;num&gt;     &lt;num&gt;    &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  values      :     5    -114.5    32.47         0         0         0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    6    -113.6    32.47         0         0         0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    7    -112.6    32.47         0         0         0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Species_5 Species_6 Species_7 (and 18 more)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt;     &lt;num&gt;     &lt;num&gt;              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0         0         0              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0         0         0              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0         0         0              </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Claudia Nuñez-Penichet, Marlon E. Cobos, Jorge Soberón, Tomer Gueta, Narayani Barve, Vijay Barve, Adolfo G. Navarro-Sigüenza, A. Townsend Peterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

